{"version":3,"sources":["components/Person.js","components/Content.js","components/Filter.js","components/Notification.js","components/PersonForm.js","services/persons.js","App.js","index.js"],"names":["Person","person","deletePerson","name","number","onClick","id","Content","persons","allPersons","length","map","i","key","Filter","value","onChange","successStyle","color","background","font_size","border_style","border_radius","padding","margin_bottom","errorStyle","Notification","message","includes","style","className","PersonForm","onSubmit","newName","handleNameChange","newNumber","handleNumberChange","type","baseUrl","axios","get","then","response","data","newObject","post","put","delete","App","useState","setPersons","setAllPersons","setNewName","setNewNumber","newFilter","setNewFilter","setMessage","useEffect","personService","initialPersons","event","target","regex","RegExp","filter","match","preventDefault","personToAdd","updatedPerson","window","confirm","returnedPerson","console","log","personItem","setTimeout","catch","error","concat","filteredPerson","personName","personId","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ece09b84.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Person = ({person, deletePerson}) =>\r\n  <li>\r\n    {person.name} {person.number} <button onClick={() => deletePerson(person.id)}>delete</button>\r\n  </li>\r\n\r\nexport default Person","import React from 'react'\r\nimport Person from './Person'\r\n\r\nconst Content = ({ persons, allPersons, deletePerson }) => {\r\n  if (persons.length === 0) {\r\n    return (\r\n      <ul>\r\n        {allPersons.map((person, i) => (\r\n          <Person key={i} person={person} deletePerson={deletePerson} />\r\n        ))}\r\n      </ul>\r\n    )\r\n  } else {\r\n    return (\r\n      <ul>\r\n        {persons.map((person, i) => (\r\n          <Person key={i} person={person} deletePerson={deletePerson} />\r\n        ))}\r\n      </ul>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Content\r\n","import React from 'react'\r\n\r\nconst Filter = ({value, onChange}) =>\r\n    <div>\r\n        filter shown with <input value={value} onChange={onChange} />\r\n    </div>\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst successStyle = {\r\n  color: 'green',\r\n  background: 'lightgrey',\r\n  font_size: 20,\r\n  border_style: 'solid',\r\n  border_radius: 5,\r\n  padding: 10,\r\n  margin_bottom: 10\r\n}\r\n\r\nconst errorStyle = {\r\n  color: 'red',\r\n  background: 'lightgrey',\r\n  font_size: 20,\r\n  border_style: 'solid',\r\n  border_radius: 5,\r\n  padding: 10,\r\n  margin_bottom: 10\r\n}\r\n\r\nconst Notification = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n\r\n    if (message.includes('ERROR')){\r\n      return (\r\n        <div style={errorStyle} className=\"error\">\r\n          {message}\r\n        </div>\r\n      )\r\n    } else {\r\n      return (\r\n        <div style={successStyle} className=\"error\">\r\n          {message}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\nexport default Notification","import React from 'react'\r\n\r\nconst PersonForm = ({onSubmit, newName, handleNameChange, newNumber, handleNumberChange}) =>\r\n  <form onSubmit={onSubmit}>\r\n        <div>\r\n            name: <input value={newName} onChange={handleNameChange} />\r\n        </div>\r\n        <div>\r\n            number: <input value={newNumber} onChange={handleNumberChange} />\r\n        </div>\r\n        <div>\r\n            <button type=\"submit\">add</button>\r\n        </div>\r\n    </form>\r\n\r\nexport default PersonForm","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst remove = id => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\n\r\nexport default { getAll, create, update, remove }","import React, { useState, useEffect } from 'react'\r\nimport Content from './components/Content'\r\nimport Filter from './components/Filter'\r\nimport Notification from './components/Notification'\r\nimport PersonForm from './components/PersonForm'\r\nimport personService from './services/persons'\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons] = useState([])\r\n  const [ allPersons, setAllPersons] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [newFilter, setNewFilter] = useState('')\r\n  const [message, setMessage] = useState(null)\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll()\r\n      .then(initialPersons => {\r\n      setAllPersons(initialPersons)\r\n    })\r\n  }, [])\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    const person = allPersons.filter((person) =>\r\n        person.name === newName\r\n    )\r\n\r\n    const personToAdd = person[0]\r\n    const updatedPerson = { ...personToAdd, number: newNumber }\r\n\r\n    if (person.length !== 0) {\r\n      if (window.confirm(`${personToAdd.name} is already added to the phonebook, replace the old number with a new one ?`)) {\r\n        personService\r\n          .update(updatedPerson.id, updatedPerson).then(returnedPerson => {\r\n            console.log(`${returnedPerson.name} successfully updated`)\r\n            setAllPersons(allPersons.map(personItem => personItem.id !== personToAdd.id ? personItem : returnedPerson))\r\n            setNewName('')\r\n            setNewNumber('')\r\n            setMessage(\r\n              `${updatedPerson.name} was successfully updated`\r\n            )\r\n            setTimeout(() => {\r\n              setMessage(null)\r\n            }, 5000)\r\n          })\r\n          .catch((error) => {\r\n            console.log(error)\r\n            setAllPersons(allPersons.filter(person => person.id !== updatedPerson.id))\r\n            setNewName('')\r\n            setNewNumber('')\r\n            setMessage(\r\n              `[ERROR] ${updatedPerson.name} was already deleted from server`\r\n            )\r\n            setTimeout(() => {\r\n              setMessage(null)\r\n            }, 5000)\r\n          })\r\n      }\r\n    } else {\r\n        const personToAdd = {\r\n            name: newName,\r\n            number: newNumber\r\n          }\r\n          personService\r\n            .create(personToAdd)\r\n            .then(returnedPerson => {\r\n              setAllPersons(allPersons.concat(returnedPerson))\r\n              setNewName('')\r\n              setNewNumber('')\r\n              setMessage(\r\n                `${newName} was successfully added`\r\n              )\r\n              setTimeout(() => {\r\n                setMessage(null)\r\n              }, 5000)\r\n            })\r\n            .catch(error => {\r\n              setMessage(\r\n                `[ERROR] ${error.response.data.error}`\r\n              )\r\n              setTimeout(() => {\r\n                setMessage(null)\r\n              }, 5000)\r\n              console.log(error.response.data)\r\n            })\r\n    }\r\n  }\r\n\r\n  const deletePerson = (id) => {\r\n    const filteredPerson = allPersons.filter(person => person.id === id)\r\n    const personName = filteredPerson[0].name\r\n    const personId = filteredPerson[0].id\r\n    if (window.confirm(`Delete ${personName} ?`)) {\r\n      personService\r\n        .remove(personId)\r\n      console.log(`${personName} successfully deleted`)\r\n      setMessage(\r\n        `${personName} was successfully deleted`\r\n      )\r\n      setAllPersons(allPersons.filter(person => person.id !== personId))\r\n      setTimeout(() => {\r\n        setMessage(null)\r\n      }, 5000)\r\n    }\r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleFilterChange = (event) => {\r\n    setNewFilter(event.target.value)\r\n    const regex = new RegExp( newFilter, 'i' );\r\n    const filteredPersons = () => allPersons.filter(person => person.name.match(regex))\r\n    setPersons(filteredPersons)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={message} />\r\n      <Filter value={newFilter} onChange={handleFilterChange} />\r\n      <h2>Add new person</h2>\r\n      <PersonForm onSubmit={addPerson} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange} />\r\n      <h2>Numbers</h2>\r\n      <Content persons={persons} allPersons={allPersons} deletePerson={deletePerson} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}